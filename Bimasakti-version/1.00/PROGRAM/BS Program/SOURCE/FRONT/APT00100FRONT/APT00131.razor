@inherits R_Page
@attribute [R_Page(Title = "Invoice Item")]
@using APT00100COMMON.DTOs.APT00131
@using APT00100MODEL

<R_StackLayout Style="width: 1200px">
    <R_StackLayout Row>
        <R_ItemLayout col="7">
            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Property</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="5" Class="me-1">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CPROPERTY_NAME"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_Label>Ref. No.</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="3" Class="pe-3">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CREF_NO"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Department</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CDEPT_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="3" Class="pe-1">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CDEPT_NAME"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_Label>Ref. Date</R_Label>
                </R_ItemLayout>

                <R_ItemLayout col="3" Class="pe-3">
                    <R_DatePicker @bind-Value="@loViewModel.loHeader.DREF_DATE"
                                  R_ConductorGridSource="@_conductorRef"
                                  Enabled="false">
                    </R_DatePicker>
                </R_ItemLayout>
            </R_StackLayout>

            <R_StackLayout Row>
                <R_ItemLayout col="2">
                    <R_Label>Supplier</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CSUPPLIER_ID"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="5">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CSUPPLIER_NAME"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="3" Class="pe-3 ps-1">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CSUPPLIER_SEQ_NO"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
        <R_ItemLayout col="5">
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>Currency</R_Label>
                </R_ItemLayout>
                <R_ItemLayout col="2">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CCURRENCY_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout col="7" Class="pe-3">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CCURRENCY_NAME"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>Local Currency</R_Label>
                </R_ItemLayout>
                <R_ItemLayout Style="width:110px">
                    <R_NumericTextBox @bind-Value="@loViewModel.loHeader.NLBASE_RATE"
                                      R_ConductorGridSource="@_conductorRef"
                                      Arrows="false"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width:60px">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CCURRENCY_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width: 10px">
                    <R_Label>=</R_Label>
                </R_ItemLayout>
                <R_ItemLayout Style="width:110px">
                    <R_NumericTextBox @bind-Value="@loViewModel.loHeader.NLCURRENCY_RATE"
                                      R_ConductorGridSource="@_conductorRef"
                                      Arrows="false"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width:60px">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CLOCAL_CURRENCY_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout col="3">
                    <R_Label>Tax Rate</R_Label>
                </R_ItemLayout>
                <R_ItemLayout Style="width:95px">
                    <R_NumericTextBox @bind-Value="@loViewModel.loHeader.NTAX_BASE_RATE"
                                      R_ConductorGridSource="@_conductorRef"
                                      Arrows="false"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width:60px">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CCURRENCY_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width: 10px">
                    <R_Label>=</R_Label>
                </R_ItemLayout>
                <R_ItemLayout Style="width:95px">
                    <R_NumericTextBox @bind-Value="@loViewModel.loHeader.NTAX_CURRENCY_RATE"
                                      R_ConductorGridSource="@_conductorRef"
                                      Arrows="false"
                                      Enabled="false">
                    </R_NumericTextBox>
                </R_ItemLayout>
                <R_ItemLayout Style="width:60px">
                    <R_TextBox @bind-Value="@loViewModel.loHeader.CLOCAL_CURRENCY_CODE"
                               R_ConductorGridSource="@_conductorRef"
                               Enabled="false">
                    </R_TextBox>
                </R_ItemLayout>
            </R_StackLayout>
        </R_ItemLayout>
    </R_StackLayout>

    <R_StackLayout Row>
        <R_ItemLayout col="12">
            <R_Grid @ref="@_gridAdditionalRef"
                    DataSource="@loViewModel.loAdditionalList"
                    Pageable="true"
                    R_ConductorGridSource="@_conductorRef"
                    R_GridType="@R_eGridType.Original"
                    AllowAddNewRow="true"
                    AllowEditRow="true"
                    AllowDeleteRow="true"
                    Height="410px"
                    R_After_Open_Grid_Lookup="@Grid_AfterlookUp"
                    R_Before_Open_Grid_Lookup="@Grid_BeforelookUp"
                    R_ServiceGetListRecord="@Grid_R_ServiceGetListRecord">
                <R_GridColumns>
                    <R_GridLookupColumn FieldName=@nameof(APT00131DTO.CADD_DEPT_CODE) HeaderText="Dept. Code" Width="150px" R_EnableAdd></R_GridLookupColumn>
                    <R_GridTextColumn FieldName=@nameof(APT00131DTO.CADD_DEPT_NAME) HeaderText="Dept. Name" Width="300px"></R_GridTextColumn>
                    <R_GridLookupColumn FieldName=@nameof(APT00131DTO.CCHARGES_ID) HeaderText="Charge Id" Width="150px" R_EnableAdd R_EnableEdit></R_GridLookupColumn>
                    <R_GridTextColumn FieldName=@nameof(APT00131DTO.CCHARGES_NAME) HeaderText="Charge Name" Width="300px" ></R_GridTextColumn>
                    <R_GridTextColumn FieldName=@nameof(APT00131DTO.CCHARGES_DESC) HeaderText="Description" Width="300px" R_EnableAdd R_EnableEdit></R_GridTextColumn>
                    <R_GridNumericColumn FieldName=@nameof(APT00131DTO.NADDITION_AMOUNT) HeaderText="Amount (Trx)" Width="200px" R_EnableAdd R_EnableEdit></R_GridNumericColumn>
                    <R_GridNumericColumn FieldName=@nameof(APT00131DTO.NLADDITION_AMOUNT) HeaderText="Amount (Local)" Width="200px" R_EnableAdd R_EnableEdit></R_GridNumericColumn>
                    <R_GridNumericColumn FieldName=@nameof(APT00131DTO.NBADDITION_AMOUNT) HeaderText="Amount (Base)" Width="200px" R_EnableAdd R_EnableEdit></R_GridNumericColumn>
                    <R_GridTextColumn FieldName=@nameof(APT00131DTO.CUPDATE_BY) HeaderText="Updated By" Width="150px"></R_GridTextColumn>
                    <R_GridDateTimePickerColumn FieldName=@nameof(APT00131DTO.DUPDATE_DATE) HeaderText="Updated Date" Width="200px"></R_GridDateTimePickerColumn>
                    <R_GridTextColumn FieldName=@nameof(APT00131DTO.CCREATE_BY) HeaderText="Created By" Width="150px"></R_GridTextColumn>
                    <R_GridDateTimePickerColumn FieldName=@nameof(APT00131DTO.DCREATE_DATE) HeaderText="Created Date" Width="200px"></R_GridDateTimePickerColumn>
                </R_GridColumns>
            </R_Grid>
        </R_ItemLayout>
    </R_StackLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conductorRef"
                    R_ViewModel="@loViewModel"
                    R_ServiceGetRecord="Additional_ServiceGetRecord"
                    R_AfterSave="Additional_AfterSave"
                    R_BeforeCancel="Additional_BeforeCancel"
                    R_Display="Additional_Display"
                    R_ServiceSave="Additional_ServiceSave"
                    R_IsHeader="true" />